{"version":3,"sources":["components/SearchForm/SearchBar.module.css","components/PhotoCard/ImageGalleryItem.module.css","components/Button/Button.module.css","components/Modal/Modal.module.css","components/Gallery/ImageGallery.module.css","components/App/App.module.css","components/SearchForm/SearchBar.jsx","services/image-api.js","components/ErrorNotification/ErrorNotification.jsx","components/Loader/Loader.jsx","services/mapper.js","components/PhotoCard/ImageGalleryItem.jsx","components/Button/Button.jsx","components/Gallery/ImageGallery.jsx","components/Modal/Modal.jsx","components/App/App.jsx","index.js"],"names":["module","exports","SearchForm","state","query","handleChange","e","setState","target","value","handleSubmit","preventDefault","props","onSearch","className","styles","Searchbar","onSubmit","this","SearchForm_button","SearchForm_button_label","SearchForm_input","type","autoComplete","placeholder","onChange","Component","fetchImg","pageNumder","fetch","then","res","json","data","hits","ErrorNotification","message","LOADER_ROOT","document","querySelector","Loader","createPortal","x","y","rx","ry","width","height","mapper","images","map","id","webformat","webformatURL","largeImage","largeImageURL","tags","PhotoCard","ImageGalleryItem","key","onClick","src","alt","ImageGalleryItem_image","Button","ButtonWrapper","Gallery","loadMore","ImageGallery","idImage","parentElement","MODAL_ROOT","Modal","backdropRef","createRef","handleKeyPress","code","onClose","handleBackdropClick","current","window","addEventListener","removeEventListener","children","Overlay","ref","role","App","isLoading","error","pageNumber","isModalOpen","linkLargeImage","rootRef","fetchImages","imageAPI","catch","finally","scrollTo","top","body","scrollHeight","behavior","scrollTop","openModal","closeModal","linkBigImage","currentItemImage","find","item","Number","prevProps","prevState","length","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.e15cb33a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"SearchBar_Searchbar__Xhx9N\",\"SearchForm\":\"SearchBar_SearchForm__1ABps\",\"SearchForm_button\":\"SearchBar_SearchForm_button__1Ma90\",\"SearchForm_button_label\":\"SearchBar_SearchForm_button_label__2xXPt\",\"SearchForm_input\":\"SearchBar_SearchForm_input__3B0NY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__2ZN4E\",\"ImageGalleryItem_image\":\"ImageGalleryItem_ImageGalleryItem_image__2JVm_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ButtonWrapper\":\"Button_ButtonWrapper__3mbJB\",\"Button\":\"Button_Button__AhPZe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2obvP\",\"Modal\":\"Modal_Modal__bF4LB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__2qm3P\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__2vx18\"};","import React, { Component } from 'react';\r\nimport styles from './SearchBar.module.css';\r\n\r\nexport default class SearchForm extends Component {\r\n  state = {\r\n    query: '',\r\n  };\r\n\r\n  handleChange = e => {\r\n    this.setState({\r\n      query: e.target.value,\r\n    });\r\n  };\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n    this.props.onSearch(this.state.query);\r\n    this.setState({ query: '' });\r\n  };\r\n  render() {\r\n    return (\r\n      <div className={styles.Searchbar}>\r\n        <form className={styles.SearchForm} onSubmit={this.handleSubmit}>\r\n          <button className={styles.SearchForm_button}>\r\n            <label className={styles.SearchForm_button_label} />\r\n          </button>\r\n          <input\r\n            className={styles.SearchForm_input}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            placeholder=\"Search images...\"\r\n            onChange={this.handleChange}\r\n          />\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","export const fetchImg = (query = '', pageNumder = 1) => {\r\n  return fetch(\r\n    `https://pixabay.com/api/?key=13042188-dc29c2397758c430becc93316&q=${query}&page=${pageNumder}`,\r\n  )\r\n    .then(res => res.json())\r\n    .then(data => data.hits);\r\n};\r\n","import React from 'react';\r\n\r\nconst ErrorNotification = message => <div>Error: {message}</div>;\r\n\r\nexport default ErrorNotification;\r\n","import React from 'react';\r\nimport ContentLoader from 'react-content-loader';\r\nimport { createPortal } from 'react-dom';\r\n\r\nconst LOADER_ROOT = document.querySelector('#loader-root');\r\n\r\nconst Loader = () =>\r\n  createPortal(\r\n    <ContentLoader>\r\n      {/* Only SVG shapes */}\r\n      <rect x=\"0\" y=\"0\" rx=\"5\" ry=\"5\" width=\"70\" height=\"70\" />\r\n      <rect x=\"80\" y=\"17\" rx=\"4\" ry=\"4\" width=\"300\" height=\"13\" />\r\n      <rect x=\"80\" y=\"40\" rx=\"3\" ry=\"3\" width=\"250\" height=\"10\" />\r\n    </ContentLoader>,\r\n    LOADER_ROOT,\r\n  );\r\n\r\nexport default Loader;\r\n","export const mapper = images => {\r\n  return images.map(\r\n    ({ id, webformatURL: webformat, largeImageURL: largeImage, tags }) => ({\r\n      id,\r\n      webformat,\r\n      largeImage,\r\n      tags,\r\n    }),\r\n  );\r\n};\r\n","import React from 'react';\r\nimport styles from './ImageGalleryItem.module.css';\r\n\r\nconst PhotoCard = ({ id, webformat, largeImage, tags }) => {\r\n  const showLargeImage = e => {\r\n    // console.dir(e.currentTarget);\r\n  };\r\n\r\n  return (\r\n    <li\r\n      id={id}\r\n      className={styles.ImageGalleryItem}\r\n      key={id}\r\n      onClick={showLargeImage}\r\n    >\r\n      <img\r\n        src={webformat}\r\n        alt={tags}\r\n        className={styles.ImageGalleryItem_image}\r\n      />\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default PhotoCard;\r\n","import React from 'react';\nimport styles from './Button.module.css';\n\nconst Button = ({ onClick }) => (\n  <div className={styles.ButtonWrapper}>\n    <button type=\"button\" className={styles.Button} onClick={onClick}>\n      Load more\n    </button>\n  </div>\n);\n\nexport default Button;\n","import React from 'react';\r\nimport PhotoCard from '../PhotoCard/ImageGalleryItem';\r\nimport Button from '../Button/Button';\r\nimport styles from './ImageGallery.module.css';\r\n\r\nconst Gallery = ({ images, loadMore, onClick }) => {\r\n  const showLargeImage = ({ target }) => {\r\n    const idImage = target.parentElement.id;\r\n    onClick(idImage);\r\n  };\r\n  return (\r\n    <div>\r\n      <ul className={styles.ImageGallery} onClick={showLargeImage}>\r\n        {images.map(({ id, webformat, largeImage, tags }) => (\r\n          <PhotoCard\r\n            id={id}\r\n            webformat={webformat}\r\n            largeImage={largeImage}\r\n            tags={tags}\r\n          />\r\n        ))}\r\n      </ul>\r\n      <Button onClick={loadMore} />\r\n    </div>\r\n  );\r\n};\r\nexport default Gallery;\r\n","import React, { Component, createRef } from 'react';\nimport styles from './Modal.module.css';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nconst MODAL_ROOT = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  static propTypes = {\n    children: PropTypes.node.isRequired,\n    onClose: PropTypes.func.isRequired,\n  };\n\n  backdropRef = createRef();\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyPress);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyPress);\n  }\n\n  handleKeyPress = e => {\n    if (e.code !== 'Escape') {\n      return;\n    }\n\n    this.props.onClose();\n  };\n\n  handleBackdropClick = e => {\n    if (this.backdropRef.current && e.target !== this.backdropRef.current) {\n      return;\n    }\n\n    this.props.onClose();\n  };\n\n  render() {\n    const { children } = this.props;\n    return createPortal(\n      <div\n        className={styles.Overlay}\n        ref={this.backdropRef}\n        onClick={this.handleBackdropClick}\n        role=\"presentation\"\n      >\n        <div className={styles.Modal}>{children}</div>\n      </div>,\n      MODAL_ROOT,\n    );\n  }\n}\n","import React, { Component, createRef } from 'react';\r\nimport SearchForm from '../SearchForm/SearchBar';\r\nimport * as imageAPI from '../../services/image-api';\r\nimport ErrorNotification from '../ErrorNotification/ErrorNotification';\r\nimport Loader from '../Loader/Loader';\r\nimport { mapper } from '../../services/mapper';\r\nimport Gallery from '../Gallery/ImageGallery';\r\nimport styles from './App.module.css';\r\nimport Modal from '../Modal/Modal';\r\n\r\nexport default class App extends Component {\r\n  state = {\r\n    images: [],\r\n    isLoading: false,\r\n    error: null,\r\n    pageNumber: 1,\r\n    query: '',\r\n    isModalOpen: false,\r\n    linkLargeImage: '',\r\n  };\r\n\r\n  rootRef = createRef();\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevState.query !== this.state.query) {\r\n      this.fetchImages();\r\n    }\r\n  }\r\n\r\n  fetchImages = () => {\r\n    const { query, pageNumber } = this.state;\r\n    this.setState({ isLoading: true });\r\n\r\n    imageAPI\r\n      .fetchImg(query, pageNumber)\r\n      .then(images => {\r\n        this.setState(state => ({\r\n          images: [...state.images, ...mapper(images)],\r\n          pageNumber: state.pageNumber + 1,\r\n        }));\r\n      })\r\n      .catch(error => {\r\n        this.setState({ error });\r\n      })\r\n      .finally(() => {\r\n        this.setState({ isLoading: false });\r\n        window.scrollTo({\r\n          top: document.body.scrollHeight,\r\n          behavior: 'smooth',\r\n        });\r\n      });\r\n    this.rootRef.current.scrollTop = this.rootRef.current.scrollHeight;\r\n  };\r\n\r\n  onSearch = query => {\r\n    this.setState({ query, images: [], pageNumber: 1 });\r\n  };\r\n\r\n  openModal = () => this.setState({ isModalOpen: true });\r\n\r\n  closeModal = () => this.setState({ isModalOpen: false });\r\n\r\n  linkBigImage = id => {\r\n    const currentItemImage = this.state.images.find(\r\n      item => item.id === Number(id),\r\n    );\r\n    this.openModal();\r\n    this.setState({ linkLargeImage: currentItemImage.largeImage });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      error,\r\n      isLoading,\r\n      images,\r\n      isModalOpen,\r\n      linkLargeImage,\r\n    } = this.state;\r\n    return (\r\n      <div ref={this.rootRef} className={styles.App}>\r\n        <SearchForm onSearch={this.onSearch} />\r\n        {error && <ErrorNotification message={error.message} />}\r\n        {isLoading && <Loader />}\r\n        {images.length > 0 && (\r\n          <Gallery\r\n            images={images}\r\n            loadMore={this.fetchImages}\r\n            onClick={this.linkBigImage}\r\n          />\r\n        )}\r\n        {isModalOpen && (\r\n          <Modal onClose={this.closeModal}>\r\n            <img src={linkLargeImage} alt=\"\" />\r\n          </Modal>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App/App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}