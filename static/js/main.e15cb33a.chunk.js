(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],[,,,,,,,function(e,t,a){e.exports={Searchbar:"SearchBar_Searchbar__Xhx9N",SearchForm:"SearchBar_SearchForm__1ABps",SearchForm_button:"SearchBar_SearchForm_button__1Ma90",SearchForm_button_label:"SearchBar_SearchForm_button_label__2xXPt",SearchForm_input:"SearchBar_SearchForm_input__3B0NY"}},function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__2ZN4E",ImageGalleryItem_image:"ImageGalleryItem_ImageGalleryItem_image__2JVm_"}},function(e,t,a){e.exports={ButtonWrapper:"Button_ButtonWrapper__3mbJB",Button:"Button_Button__AhPZe"}},function(e,t,a){e.exports={Overlay:"Modal_Overlay__2obvP",Modal:"Modal_Modal__bF4LB"}},,,,function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__2qm3P"}},function(e,t,a){e.exports={App:"App_App__2vx18"}},function(e,t,a){e.exports=a(22)},,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(1),c=a.n(o),l=(a(21),a(11)),i=a(2),m=a(3),u=a(5),s=a(4),h=a(6),g=a(7),p=a.n(g),d=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(n)))).state={query:""},a.handleChange=function(e){a.setState({query:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),a.props.onSearch(a.state.query),a.setState({query:""})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:p.a.Searchbar},n.a.createElement("form",{className:p.a.SearchForm,onSubmit:this.handleSubmit},n.a.createElement("button",{className:p.a.SearchForm_button},n.a.createElement("label",{className:p.a.SearchForm_button_label})),n.a.createElement("input",{className:p.a.SearchForm_input,type:"text",autoComplete:"off",placeholder:"Search images...",onChange:this.handleChange})))}}]),t}(r.Component),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return fetch("https://pixabay.com/api/?key=13042188-dc29c2397758c430becc93316&q=".concat(e,"&page=").concat(t)).then((function(e){return e.json()})).then((function(e){return e.hits}))},b=function(e){return n.a.createElement("div",null,"Error: ",e)},y=a(13),_=document.querySelector("#loader-root"),v=function(){return Object(o.createPortal)(n.a.createElement(y.a,null,n.a.createElement("rect",{x:"0",y:"0",rx:"5",ry:"5",width:"70",height:"70"}),n.a.createElement("rect",{x:"80",y:"17",rx:"4",ry:"4",width:"300",height:"13"}),n.a.createElement("rect",{x:"80",y:"40",rx:"3",ry:"3",width:"250",height:"10"})),_)},S=function(e){return e.map((function(e){return{id:e.id,webformat:e.webformatURL,largeImage:e.largeImageURL,tags:e.tags}}))},E=a(8),I=a.n(E),k=function(e){var t=e.id,a=e.webformat,r=(e.largeImage,e.tags);return n.a.createElement("li",{id:t,className:I.a.ImageGalleryItem,key:t,onClick:function(e){}},n.a.createElement("img",{src:a,alt:r,className:I.a.ImageGalleryItem_image}))},O=a(9),w=a.n(O),j=function(e){var t=e.onClick;return n.a.createElement("div",{className:w.a.ButtonWrapper},n.a.createElement("button",{type:"button",className:w.a.Button,onClick:t},"Load more"))},B=a(14),N=a.n(B),C=function(e){var t=e.images,a=e.loadMore,r=e.onClick;return n.a.createElement("div",null,n.a.createElement("ul",{className:N.a.ImageGallery,onClick:function(e){var t=e.target.parentElement.id;r(t)}},t.map((function(e){var t=e.id,a=e.webformat,r=e.largeImage,o=e.tags;return n.a.createElement(k,{id:t,webformat:a,largeImage:r,tags:o})}))),n.a.createElement(j,{onClick:a}))},x=a(15),M=a.n(x),q=a(10),F=a.n(q),L=document.querySelector("#modal-root"),G=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).backdropRef=Object(r.createRef)(),a.handleKeyPress=function(e){"Escape"===e.code&&a.props.onClose()},a.handleBackdropClick=function(e){a.backdropRef.current&&e.target!==a.backdropRef.current||a.props.onClose()},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyPress)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyPress)}},{key:"render",value:function(){var e=this.props.children;return Object(o.createPortal)(n.a.createElement("div",{className:F.a.Overlay,ref:this.backdropRef,onClick:this.handleBackdropClick,role:"presentation"},n.a.createElement("div",{className:F.a.Modal},e)),L)}}]),t}(r.Component),R=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={images:[],isLoading:!1,error:null,pageNumber:1,query:"",isModalOpen:!1,linkLargeImage:""},a.rootRef=Object(r.createRef)(),a.fetchImages=function(){var e=a.state,t=e.query,r=e.pageNumber;a.setState({isLoading:!0}),f(t,r).then((function(e){a.setState((function(t){return{images:[].concat(Object(l.a)(t.images),Object(l.a)(S(e))),pageNumber:t.pageNumber+1}}))})).catch((function(e){a.setState({error:e})})).finally((function(){a.setState({isLoading:!1}),window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})})),a.rootRef.current.scrollTop=a.rootRef.current.scrollHeight},a.onSearch=function(e){a.setState({query:e,images:[],pageNumber:1})},a.openModal=function(){return a.setState({isModalOpen:!0})},a.closeModal=function(){return a.setState({isModalOpen:!1})},a.linkBigImage=function(e){var t=a.state.images.find((function(t){return t.id===Number(e)}));a.openModal(),a.setState({linkLargeImage:t.largeImage})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(e,t){t.query!==this.state.query&&this.fetchImages()}},{key:"render",value:function(){var e=this.state,t=e.error,a=e.isLoading,r=e.images,o=e.isModalOpen,c=e.linkLargeImage;return n.a.createElement("div",{ref:this.rootRef,className:M.a.App},n.a.createElement(d,{onSearch:this.onSearch}),t&&n.a.createElement(b,{message:t.message}),a&&n.a.createElement(v,null),r.length>0&&n.a.createElement(C,{images:r,loadMore:this.fetchImages,onClick:this.linkBigImage}),o&&n.a.createElement(G,{onClose:this.closeModal},n.a.createElement("img",{src:c,alt:""})))}}]),t}(r.Component);c.a.render(n.a.createElement(R,null),document.getElementById("root"))}],[[16,1,2]]]);
//# sourceMappingURL=main.e15cb33a.chunk.js.map